<template>
  <div class="bg-white/90 rounded-28 sm:p-5 p-3">
    <div v-if="data?.image" class="relative md:mb-5 sm:mb-4 mb-3 max-h-[320px]">
      <img
        v-if="imgError"
        :src="data?.image.thumbnail?.small"
        alt=""
        class="rounded-2xl max-h-[320px] h-full object-cover w-full"
        @error="imgError = false"
      /><img
        v-else
        src="~/assets/images/main_image.png"
        alt=""
        class="rounded-2xl max-h-[320px] object-cover w-full"
      />
      <div
        class="flex items-center gap-1 md:gap-2 absolute left-4 bottom-4 px-1.5 p-1 md:p-2 bg-white rounded-40"
      >
        <!--        :style="`background-color: ${data?.category?.background_color}`"-->
        <img
          v-if="imgError"
          :src="data?.category?.icon?.file"
          alt="icon"
          @error="imgError = false"
        />
        <img
          v-else
          src="~/assets/images/heart.png"
          alt="icon"
          @error="imgError = false"
        />
        <p class="text-black-100 font-medium text-xs md:text-sm">
          {{ data?.category?.name }}
        </p>
      </div>
    </div>
    <h3
      class="lg:text-xl md:text-lg text-black-100 leading-130 text-base font-semibold max-w-[490px]"
    >
      {{ data?.title }}
    </h3>

    <ClientOnly>
      <div class="md:mt-6 sm:mt-4 mt-3 flex flex-col gap-4">
        <div class="flex gap-5 lg:flex-row flex-col">
          <div
            class="sm:p-3 p-2 rounded-2xl border border-gray-600 flex flex-col items-center w-full"
          >
            <p
              class="text-black-100 font-medium leading-130 text-base text-center"
            >
              {{ $t('till_end_of_generous') }}
            </p>
            <div class="mt-3 flex gap-4 items-center">
              <div
                class="flex items-center flex-col bg-green-100 rounded-md md:py-1.5 py-1 md:px-3.5 px-2"
              >
                <p class="md:text-base text-sm font-bold text-green-400">
                  {{ remainingDays }}
                </p>
                <span
                  class="sm:mt-0.5 mt-0 text-green-400 text-xs font-medium"
                  >{{ $t('day') }}</span
                >
              </div>
              <div class="flex flex-col gap-1">
                <div class="w-1 h-1 rounded-full bg-green-400"></div>
                <div class="w-1 h-1 rounded-full bg-green-400"></div>
              </div>
              <div
                class="flex items-center flex-col bg-green-100 rounded-md md:py-1.5 py-1 md:px-3.5 px-2"
              >
                <p class="md:text-base text-sm font-bold text-green-400">
                  {{ remainingHours }}
                </p>
                <span
                  class="sm:mt-0.5 mt-0 text-green-400 text-xs font-medium"
                  >{{ $t('hour') }}</span
                >
              </div>

              <div class="flex flex-col gap-1">
                <div class="w-1 h-1 rounded-full bg-green-400"></div>
                <div class="w-1 h-1 rounded-full bg-green-400"></div>
              </div>

              <div
                class="flex items-center flex-col bg-green-100 rounded-md md:py-1.5 py-1 md:px-3.5 px-2"
              >
                <p class="md:text-base text-sm font-bold text-green-400">
                  {{ remainingMinutes }}
                </p>
                <span
                  class="sm:mt-0.5 mt-0 text-green-400 text-xs font-medium"
                  >{{ $t('minute') }}</span
                >
              </div>

              <div class="flex flex-col gap-1">
                <div class="w-1 h-1 rounded-full bg-green-400"></div>
                <div class="w-1 h-1 rounded-full bg-green-400"></div>
              </div>
              <div
                class="flex items-center flex-col bg-green-100 rounded-md md:py-1.5 py-1 md:px-3.5 px-2"
              >
                <p class="md:text-base text-sm font-bold text-green-400">
                  {{ remainingSeconds }}
                </p>
                <span
                  class="sm:mt-0.5 mt-0 text-green-400 text-xs font-medium"
                  >{{ $t('second') }}</span
                >
              </div>
            </div>
          </div>
          <div
            class="sm:p-3 p-2 rounded-2xl border border-gray-600 flex flex-col items-center w-full"
          >
            <div class="flex justify-between w-full">
              <div>
                <p class="text-sm text-gray-400">{{ $t('gathered') }}</p>
                <span class="font-bold text-green-400">
                  {{ data?.gained_money_in_percent }}%
                </span>
              </div>
              <div>
                <p class="text-sm text-gray-400 text-end">{{ $t('finish') }}</p>
                <span class="font-bold text-black-100"
                  >{{
                    formatMoneyWithSpace(parseInt(data.target_money))
                  }}
                  UZS</span
                >
              </div>
            </div>
            <div class="w-full h-2 rounded bg-green-100 my-2">
              <div
                :style="`width: ${data?.gained_money_in_percent}%`"
                class="h-full rounded bg-green-300"
              ></div>
            </div>

            <div class="flex justify-between w-full">
              <p class="text-gray-400 text-sm">
                {{ $t('geneourses') }}:
                <span class="text-black-100 font-semibold"
                  >{{ data?.donation_count }}
                  <span v-if="data?.donation_count !== 0">{{
                    $t('quantity')
                  }}</span>
                </span>
              </p>
            </div>
          </div>
        </div>
        <div class="flex gap-5 w-full sm:flex-row flex-col justify-between">
          <CommonButton
            label="add_hissa"
            buttonStyle="flex items-center"
            variant="secondary"
            class="w-full"
            @click="openHissa"
          >
            <template #before>
              <span class="icon-heart text-2xl text-white" />
            </template>
          </CommonButton>
          <CommonButton
            label="connect"
            buttonStyle="flex items-center"
            variant="darker"
            class="w-full"
            @click="openModal()"
          >
            <template #before>
              <span class="icon-share text-2xl text-green-400" />
            </template>
          </CommonButton>
        </div>

        <Transition name="fade">
          <div
            class="fixed top-0 left-0 w-full h-full bg-modal hidden opacity-0 z-[9999999]"
            v-if="showHissa"
            @click="closeHissa()"
            :class="{ '!block opacity-100 overflow-hidden ': showHissa }"
          >
            <div
              @click="closeHissa()"
              class="fixed -right-full top-1/2 left-1/2 transform -translate-x-1/2 flex items-end flex-col -translate-y-1/2 z-50 max-w-[320px]"
            >
              <span
                @click="closeHissa()"
                class="icon-close text-white text-2xl translate-x-1 md:translate-x-7 cursor-pointer"
              />
              <div
                class="relative max-w-[344px] w-full overflow-hidden bg-gradient-to-b from-app-banner-1 to-app-banner-2 rounded-28 flex flex-col justify-center items-center p-6 pt-8"
              >
                <div>
                  <img src="/icons/hissa-main.svg" alt="" />
                </div>
                <h3
                  class="text-white text-center lg:text-2xl md:text-xl text-lg font-semibold mt-5"
                >
                  {{ $t('download_app') }}
                </h3>
                <p class="text-green-200 mt-3 md:text-base text-sm text-center">
                  {{ $t('checkon_foundation') }}
                </p>
                <div class="absolute -right-5">
                  <img src="/icons/heart-transparent.svg" alt="" />
                </div>
                <div>
                  <QRCode light class="mt-5 md:mt-8" />
                </div>
                <img
                  src="/images/arm.png"
                  class="-rotate-90 absolute -right-12 bottom-32"
                  alt="arm"
                />

                <div class="mt-4 flex gap-3 w-full">
                  <a
                    :href="appstore"
                    target="_blank"
                    class="basis-1/2 hover:opacity-80 transition-all duration-300"
                  >
                    <svg
                      class="w-full"
                      xmlns="http://www.w3.org/2000/svg"
                      width="142"
                      height="52"
                      viewBox="0 0 142 52"
                      fill="none"
                    >
                      <g filter="url(#filter0_b_4418_7160)">
                        <rect
                          width="142"
                          height="52"
                          rx="12"
                          fill="#090E14"
                          fill-opacity="0.4"
                        />
                        <path
                          d="M37.1472 25.3643C37.1574 24.5647 37.3694 23.7807 37.7633 23.0853C38.1572 22.3899 38.7203 21.8056 39.4002 21.3868C38.9683 20.7688 38.3985 20.2602 37.7361 19.9014C37.0737 19.5426 36.337 19.3435 35.5844 19.3199C33.9789 19.1511 32.4225 20.2825 31.6044 20.2825C30.7704 20.2825 29.5108 19.3367 28.1544 19.3646C27.2771 19.393 26.422 19.6487 25.6726 20.1066C24.9232 20.5646 24.3049 21.2092 23.878 21.9778C22.029 25.1853 23.4082 29.8994 25.1794 32.4922C26.0656 33.7618 27.1013 35.18 28.4565 35.1297C29.7826 35.0746 30.2779 34.2824 31.8786 34.2824C33.4645 34.2824 33.9291 35.1297 35.3118 35.0977C36.7348 35.0745 37.6313 33.8224 38.4864 32.5408C39.1231 31.6362 39.6131 30.6364 39.9381 29.5784C39.1114 29.228 38.4059 28.6416 37.9096 27.8922C37.4133 27.1428 37.1481 26.2636 37.1472 25.3643Z"
                          fill="white"
                        />
                        <path
                          d="M34.5356 17.6153C35.3114 16.6821 35.6937 15.4825 35.6011 14.2715C34.4157 14.3962 33.3208 14.9639 32.5345 15.8613C32.15 16.2997 31.8555 16.8097 31.6679 17.3623C31.4803 17.9148 31.4032 18.4989 31.441 19.0813C32.0339 19.0874 32.6204 18.9586 33.1565 18.7047C33.6925 18.4508 34.164 18.0783 34.5356 17.6153Z"
                          fill="white"
                        />
                        <path
                          d="M53.9138 31.9153H49.3883L48.3016 35.1305H46.3848L50.6712 23.2349H52.6627L56.9491 35.1305H54.9996L53.9138 31.9153ZM49.857 30.4316H53.4442L51.6758 25.2134H51.6263L49.857 30.4316Z"
                          fill="white"
                        />
                        <path
                          d="M66.2059 30.7945C66.2059 33.4896 64.7662 35.2212 62.5936 35.2212C62.0432 35.2501 61.4959 35.123 61.0142 34.8547C60.5325 34.5863 60.136 34.1875 59.8701 33.7038H59.829V37.9996H58.0522V26.4576H59.7721V27.9001H59.8047C60.0829 27.4188 60.4861 27.022 60.9714 26.752C61.4568 26.482 62.0061 26.3489 62.5609 26.3668C64.7577 26.3668 66.2059 28.1068 66.2059 30.7945ZM64.3796 30.7945C64.3796 29.0386 63.474 27.8842 62.0922 27.8842C60.7347 27.8842 59.8215 29.0629 59.8215 30.7945C59.8215 32.542 60.7347 33.7123 62.0922 33.7123C63.474 33.7123 64.3796 32.5663 64.3796 30.7945Z"
                          fill="white"
                        />
                        <path
                          d="M75.7342 30.795C75.7342 33.4901 74.2945 35.2217 72.1219 35.2217C71.5715 35.2505 71.0242 35.1235 70.5425 34.8552C70.0609 34.5868 69.6644 34.188 69.3984 33.7043H69.3573V38.0001H67.5806V26.4581H69.3004V27.9006H69.333C69.6112 27.4192 70.0144 27.0225 70.4997 26.7525C70.9851 26.4825 71.5344 26.3494 72.0892 26.3673C74.2861 26.3673 75.7342 28.1073 75.7342 30.795ZM73.908 30.795C73.908 29.0391 73.0023 27.8847 71.6205 27.8847C70.263 27.8847 69.3499 29.0634 69.3499 30.795C69.3499 32.5425 70.263 33.7128 71.6205 33.7128C73.0023 33.7128 73.908 32.5668 73.908 30.795H73.908Z"
                          fill="white"
                        />
                        <path
                          d="M82.0312 31.8162C82.1628 32.9959 83.3066 33.7704 84.8695 33.7704C86.3671 33.7704 87.4445 32.9958 87.4445 31.9322C87.4445 31.0088 86.7947 30.456 85.256 30.0771L83.7174 29.7057C81.5373 29.1781 80.5252 28.1565 80.5252 26.4989C80.5252 24.4464 82.3104 23.0366 84.8452 23.0366C87.3539 23.0366 89.0737 24.4464 89.1316 26.4989H87.3381C87.2307 25.3117 86.2513 24.5951 84.82 24.5951C83.3887 24.5951 82.4093 25.3202 82.4093 26.3754C82.4093 27.2164 83.0349 27.7113 84.5651 28.0901L85.8731 28.4119C88.3091 28.9891 89.3211 29.9695 89.3211 31.7095C89.3211 33.935 87.5519 35.3289 84.7378 35.3289C82.1049 35.3289 80.3272 33.9677 80.2124 31.8161L82.0312 31.8162Z"
                          fill="white"
                        />
                        <path
                          d="M93.155 24.4048V26.4572H94.8011V27.867H93.155V32.6483C93.155 33.3911 93.4846 33.7372 94.2082 33.7372C94.4036 33.7338 94.5987 33.72 94.7927 33.696V35.0974C94.4673 35.1583 94.1367 35.1859 93.8058 35.1797C92.0533 35.1797 91.3699 34.5202 91.3699 32.8382V27.867H90.1113V26.4572H91.3699V24.4048H93.155Z"
                          fill="white"
                        />
                        <path
                          d="M95.7549 30.7941C95.7549 28.0653 97.3589 26.3506 99.8602 26.3506C102.37 26.3506 103.966 28.0653 103.966 30.7941C103.966 33.5304 102.378 35.2377 99.8602 35.2377C97.343 35.2377 95.7549 33.5304 95.7549 30.7941ZM102.156 30.7941C102.156 28.9222 101.3 27.8174 99.8602 27.8174C98.4205 27.8174 97.5652 28.9307 97.5652 30.7941C97.5652 32.6735 98.4205 33.7699 99.8602 33.7699C101.3 33.7699 102.156 32.6735 102.156 30.7941H102.156Z"
                          fill="white"
                        />
                        <path
                          d="M105.432 26.458H107.127V27.9342H107.168C107.282 27.4731 107.552 27.0657 107.931 26.7803C108.31 26.495 108.776 26.3491 109.25 26.3672C109.455 26.3665 109.659 26.3888 109.859 26.4337V28.0988C109.6 28.0197 109.33 27.9833 109.06 27.9912C108.802 27.9808 108.545 28.0264 108.306 28.1249C108.067 28.2235 107.852 28.3727 107.676 28.5622C107.501 28.7518 107.368 28.9772 107.287 29.2231C107.206 29.469 107.18 29.7295 107.209 29.9866V35.1309H105.432L105.432 26.458Z"
                          fill="white"
                        />
                        <path
                          d="M118.05 32.5828C117.811 34.1572 116.281 35.2377 114.323 35.2377C111.805 35.2377 110.242 33.5473 110.242 30.8353C110.242 28.1149 111.813 26.3506 114.248 26.3506C116.643 26.3506 118.149 27.9989 118.149 30.6286V31.2385H112.035V31.3461C112.007 31.6653 112.047 31.9868 112.152 32.2894C112.258 32.5919 112.426 32.8686 112.646 33.1009C112.866 33.3333 113.133 33.516 113.43 33.637C113.726 33.758 114.044 33.8145 114.364 33.8027C114.784 33.8421 115.205 33.7446 115.565 33.5249C115.925 33.3051 116.205 32.9747 116.363 32.5828L118.05 32.5828ZM112.044 29.9943H116.371C116.387 29.7073 116.344 29.4201 116.244 29.1507C116.144 28.8813 115.989 28.6356 115.79 28.4289C115.59 28.2222 115.35 28.059 115.085 27.9496C114.82 27.8402 114.535 27.7869 114.248 27.7931C113.959 27.7914 113.672 27.8471 113.404 27.957C113.136 28.0669 112.893 28.2289 112.688 28.4335C112.483 28.6382 112.321 28.8814 112.21 29.1493C112.099 29.4172 112.043 29.7044 112.044 29.9943V29.9943Z"
                          fill="white"
                        />
                        <path
                          d="M49.6304 14.2814C50.0029 14.2546 50.3767 14.311 50.7248 14.4465C51.0729 14.582 51.3867 14.7932 51.6435 15.0649C51.9002 15.3366 52.0936 15.662 52.2097 16.0176C52.3258 16.3733 52.3616 16.7503 52.3147 17.1215C52.3147 18.9476 51.3297 19.9973 49.6304 19.9973H47.5698V14.2814H49.6304ZM48.4559 19.1889H49.5314C49.7976 19.2048 50.064 19.1611 50.3111 19.0609C50.5583 18.9607 50.7801 18.8065 50.9603 18.6096C51.1405 18.4127 51.2746 18.178 51.3529 17.9226C51.4312 17.6672 51.4516 17.3975 51.4127 17.1332C51.4488 16.8699 51.4263 16.6019 51.3468 16.3484C51.2673 16.0948 51.1329 15.862 50.9531 15.6667C50.7733 15.4713 50.5526 15.3183 50.3068 15.2184C50.061 15.1186 49.7962 15.0744 49.5314 15.0891H48.4559V19.1889Z"
                          fill="white"
                        />
                        <path
                          d="M53.3158 17.8387C53.2887 17.5552 53.3211 17.2692 53.4108 16.999C53.5005 16.7288 53.6456 16.4804 53.8367 16.2696C54.0279 16.0589 54.2609 15.8905 54.5208 15.7753C54.7807 15.6601 55.0618 15.6006 55.346 15.6006C55.6302 15.6006 55.9113 15.6601 56.1712 15.7753C56.4311 15.8905 56.6641 16.0589 56.8552 16.2696C57.0464 16.4804 57.1915 16.7288 57.2812 16.999C57.3709 17.2692 57.4033 17.5552 57.3762 17.8387C57.4038 18.1225 57.3718 18.4089 57.2823 18.6795C57.1929 18.9501 57.0479 19.199 56.8567 19.4102C56.6654 19.6213 56.4323 19.79 56.1721 19.9055C55.9119 20.021 55.6305 20.0806 55.346 20.0806C55.0614 20.0806 54.78 20.021 54.5199 19.9055C54.2597 19.79 54.0265 19.6213 53.8353 19.4102C53.6441 19.199 53.4991 18.9501 53.4096 18.6795C53.3202 18.4089 53.2882 18.1225 53.3158 17.8387ZM56.5023 17.8387C56.5023 16.9037 56.0831 16.3569 55.3474 16.3569C54.6089 16.3569 54.1934 16.9037 54.1934 17.8387C54.1934 18.7812 54.6089 19.3238 55.3474 19.3238C56.0831 19.3238 56.5023 18.7775 56.5023 17.8387H56.5023Z"
                          fill="white"
                        />
                        <path
                          d="M62.7718 19.9976H61.8905L61.0007 16.8207H60.9335L60.0474 19.9976H59.1745L57.9878 15.6841H58.8496L59.6208 18.9756H59.6843L60.5694 15.6841H61.3844L62.2695 18.9756H62.3368L63.1042 15.6841H63.9538L62.7718 19.9976Z"
                          fill="white"
                        />
                        <path
                          d="M64.9522 15.6842H65.77V16.3694H65.8335C65.9412 16.1233 66.1229 15.917 66.3532 15.7792C66.5835 15.6415 66.8509 15.5792 67.1182 15.6009C67.3277 15.5851 67.538 15.6168 67.7336 15.6935C67.9293 15.7702 68.1051 15.8901 68.2482 16.0442C68.3913 16.1982 68.498 16.3826 68.5603 16.5836C68.6227 16.7846 68.6391 16.9971 68.6083 17.2053V19.9977H67.7587V17.4191C67.7587 16.7259 67.4581 16.3811 66.8297 16.3811C66.6875 16.3745 66.5455 16.3987 66.4135 16.4522C66.2816 16.5057 66.1627 16.5872 66.065 16.691C65.9674 16.7948 65.8933 16.9186 65.8479 17.0538C65.8024 17.1889 65.7867 17.3324 65.8018 17.4742V19.9977H64.9521L64.9522 15.6842Z"
                          fill="white"
                        />
                        <path
                          d="M69.9644 14H70.814V19.9974H69.9644V14Z"
                          fill="white"
                        />
                        <path
                          d="M71.993 17.8388C71.9659 17.5553 71.9983 17.2693 72.0881 16.999C72.1778 16.7288 72.3229 16.4804 72.5141 16.2696C72.7053 16.0589 72.9383 15.8905 73.1982 15.7753C73.4581 15.6601 73.7392 15.6006 74.0234 15.6006C74.3077 15.6006 74.5888 15.6601 74.8487 15.7753C75.1086 15.8905 75.3416 16.0589 75.5328 16.2696C75.724 16.4804 75.8691 16.7288 75.9588 16.999C76.0486 17.2693 76.081 17.5553 76.0539 17.8388C76.0815 18.1225 76.0494 18.409 75.9599 18.6796C75.8704 18.9502 75.7254 19.1991 75.5342 19.4103C75.343 19.6214 75.1098 19.7901 74.8496 19.9056C74.5894 20.021 74.308 20.0807 74.0234 20.0807C73.7389 20.0807 73.4575 20.021 73.1973 19.9056C72.9371 19.7901 72.7039 19.6214 72.5127 19.4103C72.3215 19.1991 72.1765 18.9502 72.087 18.6796C71.9974 18.409 71.9654 18.1225 71.993 17.8388ZM75.1795 17.8388C75.1795 16.9038 74.7603 16.357 74.0246 16.357C73.2861 16.357 72.8706 16.9038 72.8706 17.8388C72.8706 18.7813 73.2861 19.3239 74.0246 19.3239C74.7603 19.3239 75.1795 18.7775 75.1795 17.8388H75.1795Z"
                          fill="white"
                        />
                        <path
                          d="M76.9487 18.7775C76.9487 18.001 77.5257 17.5534 78.5499 17.4898L79.7161 17.4224V17.0501C79.7161 16.5945 79.4154 16.3373 78.8347 16.3373C78.3604 16.3373 78.0318 16.5117 77.9375 16.8167H77.1149C77.2018 16.0758 77.8973 15.6006 78.8739 15.6006C79.9532 15.6006 80.562 16.1389 80.562 17.0501V19.9974H79.7441V19.3912H79.6769C79.5404 19.6086 79.3488 19.7859 79.1216 19.9049C78.8945 20.0239 78.6398 20.0803 78.3838 20.0684C78.203 20.0873 78.0204 20.068 77.8475 20.0117C77.6747 19.9555 77.5156 19.8636 77.3804 19.742C77.2452 19.6203 77.1369 19.4717 77.0626 19.3056C76.9882 19.1394 76.9494 18.9596 76.9487 18.7775ZM79.7161 18.4089V18.0483L78.6648 18.1156C78.0719 18.1554 77.803 18.3575 77.803 18.7377C77.803 19.126 78.1391 19.3519 78.6013 19.3519C78.7367 19.3656 78.8735 19.3519 79.0036 19.3116C79.1336 19.2713 79.2542 19.2052 79.3582 19.1172C79.4622 19.0292 79.5475 18.9212 79.609 18.7995C79.6705 18.6778 79.7069 18.545 79.7161 18.4089Z"
                          fill="white"
                        />
                        <path
                          d="M81.6797 17.8388C81.6797 16.4758 82.379 15.6123 83.4667 15.6123C83.7358 15.5999 84.0028 15.6645 84.2366 15.7985C84.4703 15.9325 84.6612 16.1304 84.7869 16.3691H84.8504V14H85.7V19.9974H84.8859V19.3159H84.8186C84.6833 19.553 84.4857 19.7484 84.2474 19.8811C84.0091 20.0137 83.7391 20.0786 83.4667 20.0685C82.3715 20.0685 81.6797 19.2051 81.6797 17.8388ZM82.5574 17.8388C82.5574 18.7537 82.9878 19.3042 83.7076 19.3042C84.4237 19.3042 84.8663 18.7458 84.8663 17.8425C84.8663 16.9435 84.4191 16.3771 83.7076 16.3771C82.9924 16.3771 82.5573 16.9314 82.5573 17.8388H82.5574Z"
                          fill="white"
                        />
                        <path
                          d="M89.2137 17.8387C89.1866 17.5552 89.219 17.2692 89.3087 16.999C89.3984 16.7288 89.5435 16.4804 89.7347 16.2696C89.9258 16.0589 90.1588 15.8905 90.4187 15.7753C90.6787 15.6601 90.9597 15.6006 91.2439 15.6006C91.5281 15.6006 91.8092 15.6601 92.0691 15.7753C92.329 15.8905 92.562 16.0589 92.7532 16.2696C92.9443 16.4804 93.0894 16.7288 93.1791 16.999C93.2689 17.2692 93.3012 17.5552 93.2742 17.8387C93.3017 18.1225 93.2698 18.4089 93.1803 18.6795C93.0908 18.9501 92.9458 19.199 92.7546 19.4102C92.5634 19.6213 92.3302 19.79 92.07 19.9055C91.8099 20.021 91.5285 20.0806 91.2439 20.0806C90.9594 20.0806 90.678 20.021 90.4178 19.9055C90.1577 19.79 89.9245 19.6213 89.7333 19.4102C89.5421 19.199 89.3971 18.9501 89.3076 18.6795C89.2181 18.4089 89.1861 18.1225 89.2137 17.8387ZM92.4003 17.8387C92.4003 16.9037 91.981 16.3569 91.2453 16.3569C90.5068 16.3569 90.0914 16.9037 90.0914 17.8387C90.0914 18.7812 90.5068 19.3238 91.2453 19.3238C91.9811 19.3238 92.4003 18.7775 92.4003 17.8387Z"
                          fill="white"
                        />
                        <path
                          d="M94.4146 15.6842H95.2324V16.3694H95.2959C95.4036 16.1233 95.5853 15.917 95.8156 15.7792C96.0459 15.6415 96.3133 15.5792 96.5806 15.6009C96.7901 15.5851 97.0004 15.6168 97.196 15.6935C97.3917 15.7702 97.5675 15.8901 97.7106 16.0442C97.8537 16.1982 97.9604 16.3826 98.0228 16.5836C98.0851 16.7846 98.1015 16.9971 98.0707 17.2053V19.9977H97.2211V17.4191C97.2211 16.7259 96.9205 16.3811 96.2921 16.3811C96.1499 16.3745 96.0079 16.3987 95.8759 16.4522C95.744 16.5057 95.6251 16.5872 95.5274 16.691C95.4298 16.7948 95.3557 16.9186 95.3103 17.0538C95.2648 17.1889 95.2491 17.3324 95.2642 17.4742V19.9977H94.4146V15.6842Z"
                          fill="white"
                        />
                        <path
                          d="M102.872 14.6104V15.7039H103.805V16.421H102.872V18.639C102.872 19.0909 103.058 19.2887 103.481 19.2887C103.589 19.2884 103.697 19.2818 103.805 19.2691V19.9782C103.652 20.0055 103.497 20.0201 103.342 20.0217C102.398 20.0217 102.021 19.6886 102.021 18.857V16.421H101.338V15.7039H102.021V14.6104H102.872Z"
                          fill="white"
                        />
                        <path
                          d="M104.966 14H105.808V16.3771H105.875C105.988 16.1287 106.175 15.9212 106.41 15.7829C106.645 15.6446 106.916 15.5823 107.188 15.6044C107.396 15.593 107.605 15.6279 107.798 15.7065C107.991 15.785 108.165 15.9054 108.307 16.059C108.448 16.2126 108.554 16.3956 108.617 16.595C108.68 16.7944 108.698 17.0052 108.671 17.2125V19.9974H107.82V17.4225C107.82 16.7335 107.5 16.3845 106.899 16.3845C106.753 16.3725 106.607 16.3927 106.469 16.4435C106.332 16.4943 106.207 16.5746 106.104 16.6788C106 16.7829 105.921 16.9084 105.871 17.0465C105.822 17.1846 105.803 17.3319 105.815 17.4781V19.9974H104.966L104.966 14Z"
                          fill="white"
                        />
                        <path
                          d="M113.625 18.8328C113.51 19.227 113.26 19.568 112.919 19.7961C112.578 20.0243 112.168 20.125 111.76 20.0807C111.476 20.0882 111.194 20.0338 110.934 19.9212C110.673 19.8086 110.44 19.6406 110.251 19.4287C110.062 19.2169 109.921 18.9663 109.838 18.6944C109.755 18.4226 109.733 18.1359 109.771 17.8542C109.734 17.5718 109.757 17.2844 109.839 17.0117C109.922 16.7391 110.062 16.4873 110.251 16.2736C110.439 16.06 110.671 15.8893 110.93 15.7732C111.19 15.6571 111.472 15.5982 111.756 15.6007C112.954 15.6007 113.677 16.4207 113.677 17.7752V18.0722H110.637V18.1199C110.623 18.2782 110.643 18.4376 110.695 18.5877C110.747 18.7379 110.829 18.8755 110.937 18.9919C111.045 19.1082 111.176 19.2007 111.322 19.2633C111.468 19.326 111.625 19.3574 111.783 19.3557C111.987 19.3801 112.192 19.3434 112.375 19.2503C112.557 19.1572 112.708 19.0119 112.808 18.8327L113.625 18.8328ZM110.637 17.4426H112.811C112.822 17.2979 112.802 17.1524 112.754 17.0157C112.705 16.879 112.628 16.754 112.528 16.6488C112.429 16.5435 112.308 16.4604 112.174 16.4047C112.04 16.3489 111.896 16.3219 111.752 16.3252C111.605 16.3233 111.459 16.351 111.323 16.4065C111.187 16.462 111.063 16.5443 110.959 16.6484C110.855 16.7525 110.773 16.8765 110.718 17.0129C110.662 17.1493 110.635 17.2954 110.637 17.4426H110.637Z"
                          fill="white"
                        />
                        <rect
                          x="0.5"
                          y="0.5"
                          width="141"
                          height="51"
                          rx="11.5"
                          stroke="white"
                          stroke-opacity="0.12"
                        />
                      </g>
                      <defs>
                        <filter
                          id="filter0_b_4418_7160"
                          x="-20"
                          y="-20"
                          width="182"
                          height="92"
                          filterUnits="userSpaceOnUse"
                          color-interpolation-filters="sRGB"
                        >
                          <feFlood
                            flood-opacity="0"
                            result="BackgroundImageFix"
                          />
                          <feGaussianBlur
                            in="BackgroundImageFix"
                            stdDeviation="10"
                          />
                          <feComposite
                            in2="SourceAlpha"
                            operator="in"
                            result="effect1_backgroundBlur_4418_7160"
                          />
                          <feBlend
                            mode="normal"
                            in="SourceGraphic"
                            in2="effect1_backgroundBlur_4418_7160"
                            result="shape"
                          />
                        </filter>
                      </defs>
                    </svg>
                  </a>
                  <a
                    target="_blank"
                    :href="playstore"
                    class="basis-1/2 hover:opacity-80 transition-all duration-300"
                  >
                    <svg
                      class="w-full"
                      xmlns="http://www.w3.org/2000/svg"
                      width="142"
                      height="52"
                      viewBox="0 0 142 52"
                      fill="none"
                    >
                      <g filter="url(#filter0_b_4418_7192)">
                        <rect
                          width="142"
                          height="52"
                          rx="12"
                          fill="#090E14"
                          fill-opacity="0.4"
                        />
                        <path
                          d="M73.6426 19.6843C72.8522 19.6843 72.1859 19.4059 71.6589 18.8578C71.1363 18.3251 70.8445 17.5908 70.8576 16.841C70.8576 16.0409 71.1276 15.3635 71.6589 14.8264C72.1837 14.2784 72.85 14 73.6404 14C74.4221 14 75.0884 14.2784 75.6241 14.8264C76.1554 15.3811 76.4254 16.0584 76.4254 16.841C76.4167 17.6434 76.1467 18.3207 75.6241 18.8556C75.0993 19.4081 74.433 19.6843 73.6426 19.6843ZM50.1238 19.6843C49.3508 19.6843 48.6802 19.4102 48.1314 18.8688C47.5871 18.3295 47.3105 17.6478 47.3105 16.8432C47.3105 16.0387 47.5871 15.3569 48.1314 14.8177C48.6693 14.2762 49.3399 14.0022 50.1238 14.0022C50.5071 14.0022 50.8794 14.0789 51.2365 14.2346C51.5871 14.3858 51.8723 14.5919 52.0835 14.844L52.1358 14.9076L51.5457 15.4907L51.4847 15.4183C51.1516 15.0194 50.7052 14.8243 50.1151 14.8243C49.5882 14.8243 49.1287 15.0128 48.7498 15.3854C48.3688 15.7603 48.175 16.2513 48.175 16.8454C48.175 17.4395 48.3688 17.9305 48.7498 18.3054C49.1287 18.6781 49.5882 18.8666 50.1151 18.8666C50.6769 18.8666 51.1494 18.6781 51.5174 18.3054C51.7351 18.0862 51.8702 17.7793 51.9181 17.3913H50.0258V16.5714H52.7302L52.7411 16.6459C52.7607 16.784 52.7803 16.9265 52.7803 17.0581C52.7803 17.8144 52.5539 18.426 52.1053 18.8776C51.5958 19.4124 50.9295 19.6843 50.1238 19.6843ZM81.3943 19.5681H80.5604L78.0062 15.4534L78.028 16.1943V19.5659H77.194V14.1184H78.1456L78.1717 14.16L80.5734 18.0358L80.5517 17.297V14.1184H81.3943V19.5681ZM67.3759 19.5681H66.531V14.9382H65.0656V14.1184H68.8391V14.9382H67.3737V19.5681H67.3759ZM64.3775 19.5681H63.5348V14.1184H64.3775V19.5681ZM59.6415 19.5681H58.7988V14.9382H57.3334V14.1184H61.1069V14.9382H59.6415V19.5681ZM56.7999 19.5593H53.5686V14.1184H56.7999V14.9382H54.4134V16.4333H56.5669V17.2444H54.4134V18.7394H56.7999V19.5593ZM72.2773 18.2944C72.654 18.6737 73.1113 18.8644 73.6426 18.8644C74.1891 18.8644 74.6355 18.6781 75.0079 18.2944C75.378 17.9218 75.5653 17.4329 75.5653 16.8432C75.5653 16.2535 75.378 15.7625 75.01 15.392C74.6333 15.0128 74.1739 14.8221 73.6448 14.8221C73.0982 14.8221 72.6518 15.0084 72.2817 15.392C71.9115 15.7647 71.7242 16.2535 71.7242 16.8432C71.7242 17.4329 71.9093 17.924 72.2773 18.2944Z"
                          fill="white"
                        />
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M70.7799 27.1773C68.7221 27.1773 67.0542 28.7491 67.0542 30.9172C67.0542 33.0655 68.733 34.657 70.7799 34.657C72.8376 34.657 74.5055 33.0742 74.5055 30.9172C74.5055 28.7491 72.8376 27.1773 70.7799 27.1773ZM70.7799 33.1751C69.6541 33.1751 68.6851 32.2368 68.6851 30.9084C68.6851 29.5602 69.6563 28.6417 70.7799 28.6417C71.9056 28.6417 72.8746 29.5602 72.8746 30.9084C72.8768 32.2456 71.9056 33.1751 70.7799 33.1751ZM62.6513 27.1773C60.5936 27.1773 58.9257 28.7491 58.9257 30.9172C58.9257 33.0655 60.6045 34.657 62.6513 34.657C64.709 34.657 66.377 33.0742 66.377 30.9172C66.377 28.7491 64.7069 27.1773 62.6513 27.1773ZM62.6513 33.1751C61.5256 33.1751 60.5566 32.2368 60.5566 30.9084C60.5566 29.5602 61.5278 28.6417 62.6513 28.6417C63.7771 28.6417 64.7461 29.5602 64.7461 30.9084C64.7461 32.2456 63.7771 33.1751 62.6513 33.1751ZM52.979 28.3195V29.9022H56.7525C56.6371 30.79 56.3454 31.4455 55.899 31.8949C55.3459 32.4517 54.4923 33.0567 52.9877 33.0567C50.6687 33.0567 48.8548 31.1714 48.8548 28.8368C48.8548 26.5022 50.6687 24.6169 52.9877 24.6169C54.2397 24.6169 55.1521 25.1145 55.8293 25.7502L56.9442 24.6279C56.0035 23.7203 54.7514 23.0254 52.9964 23.0254C49.8151 23.0254 47.1455 25.6341 47.1455 28.828C47.1455 32.0308 49.8129 34.6307 52.9964 34.6307C54.7144 34.6307 56.0035 34.0651 57.0225 32.9997C58.0612 31.954 58.39 30.4787 58.39 29.2884C58.39 28.9179 58.3617 28.5847 58.3029 28.3019H52.9768C52.979 28.2997 52.979 28.3195 52.979 28.3195ZM92.5416 29.5514C92.2302 28.7118 91.2895 27.1686 89.3603 27.1686C87.4484 27.1686 85.8589 28.6833 85.8589 30.9084C85.8589 33.0085 87.431 34.6482 89.5454 34.6482C91.2438 34.6482 92.2324 33.6026 92.6395 32.9887L91.3788 32.1382C90.9607 32.763 90.3793 33.1729 89.5541 33.1729C88.7201 33.1729 88.1365 32.7915 87.7489 32.0395L92.7158 29.968C92.7158 29.9701 92.5416 29.5514 92.5416 29.5514ZM87.4767 30.801C87.4376 29.3563 88.5916 28.622 89.4169 28.622C90.0679 28.622 90.6101 28.9442 90.7952 29.4133L87.4767 30.801ZM83.4419 34.4246H85.0728V23.4375H83.4419V34.4246ZM80.7636 28.0082H80.7048C80.3368 27.5675 79.6378 27.1686 78.7451 27.1686C76.892 27.1686 75.1849 28.8105 75.1849 30.9193C75.1849 33.0194 76.8833 34.6416 78.7451 34.6416C79.6269 34.6416 80.3368 34.2405 80.7048 33.7911H80.7636V34.3282C80.7636 35.7552 80.0058 36.5247 78.7843 36.5247C77.7848 36.5247 77.1642 35.8013 76.9116 35.1962L75.4941 35.7925C75.9013 36.779 76.9878 38 78.7821 38C80.6939 38 82.3139 36.8667 82.3139 34.1024V27.3922H80.7723V28.0082C80.7745 28.0082 80.7636 28.0082 80.7636 28.0082ZM78.891 33.1751C77.7652 33.1751 76.8245 32.2281 76.8245 30.9193C76.8245 29.5997 77.7652 28.6439 78.891 28.6439C80.0058 28.6439 80.8703 29.6106 80.8703 30.9193C80.8812 32.2281 80.008 33.1751 78.891 33.1751ZM100.178 23.4375H96.2781V34.4246H97.909V30.2639H100.18C101.985 30.2639 103.76 28.9464 103.76 26.8551C103.76 24.7638 101.992 23.4375 100.178 23.4375ZM100.226 28.7294H97.9069V24.9589H100.226C101.447 24.9589 102.138 25.9738 102.138 26.8441C102.138 27.7056 101.439 28.7294 100.226 28.7294ZM110.297 27.1576C109.112 27.1576 107.891 27.6859 107.385 28.8368L108.831 29.4418C109.143 28.8368 109.713 28.6307 110.316 28.6307C111.161 28.6307 112.015 29.1393 112.034 30.0469V30.1631C111.743 29.9965 111.102 29.7422 110.336 29.7422C108.775 29.7422 107.192 30.6015 107.192 32.2127C107.192 33.688 108.472 34.6351 109.898 34.6351C110.994 34.6351 111.597 34.1374 111.973 33.5609H112.032V34.4115H113.604V30.2025C113.604 28.2427 112.158 27.1576 110.297 27.1576ZM110.092 33.1751C109.559 33.1751 108.812 32.912 108.812 32.2368C108.812 31.3863 109.744 31.064 110.538 31.064C111.257 31.064 111.597 31.2197 112.023 31.4345C111.906 32.421 111.078 33.1663 110.092 33.1751ZM119.34 27.3922L117.467 32.1579H117.408L115.468 27.3922H113.713L116.624 34.0541L114.965 37.7567H116.664L121.143 27.3922H119.34ZM104.659 34.4246H106.29V23.4375H104.659V34.4246Z"
                          fill="white"
                        />
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M20.3985 14.6754C20.1459 14.9494 20 15.3681 20 15.9162V35.354C20 35.9021 20.1459 36.3208 20.4072 36.5838L20.4747 36.643L31.2924 25.7524V25.509L20.466 14.6162L20.3985 14.6754Z"
                          fill="url(#paint0_linear_4418_7192)"
                        />
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M34.8933 29.3926L31.2852 25.7602V25.5059L34.8933 21.8735L34.9716 21.9218L39.2395 24.3638C40.4611 25.0565 40.4611 26.2009 39.2395 26.9023L34.9716 29.3444L34.8933 29.3926Z"
                          fill="url(#paint1_linear_4418_7192)"
                        />
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M34.9701 29.3446L31.2836 25.6333L20.3984 36.5919C20.7969 37.0216 21.4654 37.0698 22.2123 36.6511L34.9701 29.3446Z"
                          fill="url(#paint2_linear_4418_7192)"
                        />
                        <path
                          fill-rule="evenodd"
                          clip-rule="evenodd"
                          d="M34.9701 21.9222L22.2123 14.6267C21.4654 14.197 20.7947 14.2562 20.3984 14.6859L31.2836 25.6335L34.9701 21.9222Z"
                          fill="url(#paint3_linear_4418_7192)"
                        />
                        <rect
                          x="0.5"
                          y="0.5"
                          width="141"
                          height="51"
                          rx="11.5"
                          stroke="white"
                          stroke-opacity="0.12"
                        />
                      </g>
                      <defs>
                        <filter
                          id="filter0_b_4418_7192"
                          x="-20"
                          y="-20"
                          width="182"
                          height="92"
                          filterUnits="userSpaceOnUse"
                          color-interpolation-filters="sRGB"
                        >
                          <feFlood
                            flood-opacity="0"
                            result="BackgroundImageFix"
                          />
                          <feGaussianBlur
                            in="BackgroundImageFix"
                            stdDeviation="10"
                          />
                          <feComposite
                            in2="SourceAlpha"
                            operator="in"
                            result="effect1_backgroundBlur_4418_7192"
                          />
                          <feBlend
                            mode="normal"
                            in="SourceGraphic"
                            in2="effect1_backgroundBlur_4418_7192"
                            result="shape"
                          />
                        </filter>
                        <linearGradient
                          id="paint0_linear_4418_7192"
                          x1="30.3221"
                          y1="15.7064"
                          x2="12.9786"
                          y2="20.2967"
                          gradientUnits="userSpaceOnUse"
                        >
                          <stop stop-color="#00A0FF" />
                          <stop offset="0.00657" stop-color="#00A1FF" />
                          <stop offset="0.2601" stop-color="#00BEFF" />
                          <stop offset="0.5122" stop-color="#00D2FF" />
                          <stop offset="0.7604" stop-color="#00DFFF" />
                          <stop offset="1" stop-color="#00E3FF" />
                        </linearGradient>
                        <linearGradient
                          id="paint1_linear_4418_7192"
                          x1="40.8326"
                          y1="25.6331"
                          x2="19.7045"
                          y2="25.6331"
                          gradientUnits="userSpaceOnUse"
                        >
                          <stop stop-color="#FFE000" />
                          <stop offset="0.4087" stop-color="#FFBD00" />
                          <stop offset="0.7754" stop-color="#FFA500" />
                          <stop offset="1" stop-color="#FF9C00" />
                        </linearGradient>
                        <linearGradient
                          id="paint2_linear_4418_7192"
                          x1="32.9655"
                          y1="27.6528"
                          x2="18.916"
                          y2="51.1409"
                          gradientUnits="userSpaceOnUse"
                        >
                          <stop stop-color="#FF3A44" />
                          <stop offset="1" stop-color="#C31162" />
                        </linearGradient>
                        <linearGradient
                          id="paint3_linear_4418_7192"
                          x1="17.6574"
                          y1="8.20958"
                          x2="23.9255"
                          y2="18.6998"
                          gradientUnits="userSpaceOnUse"
                        >
                          <stop stop-color="#32A071" />
                          <stop offset="0.0685" stop-color="#2DA771" />
                          <stop offset="0.4762" stop-color="#15CF74" />
                          <stop offset="0.8009" stop-color="#06E775" />
                          <stop offset="1" stop-color="#00F076" />
                        </linearGradient>
                      </defs>
                    </svg>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </Transition>
        <Transition name="fade">
          <div
            class="fixed top-0 left-0 w-full h-full z-[9999999] bg-modal hidden opacity-0"
            v-if="showModal"
            @click="closeModal()"
            :class="{ '!block opacity-100 overflow-hidden ': showModal }"
          >
            <UIModal
              class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 sm:max-w-[434px] w-[90%] sm:w-full"
              @close="toggleModal"
              :id="data?.id"
              :show="showModal"
            />
          </div>
        </Transition>
      </div>
    </ClientOnly>
  </div>
</template>
<script setup lang="ts">
import { ref } from 'vue'
import VueAwesomeCountdown from 'vue-awesome-countdown'

import { formatMoneyWithSpace } from '@/utils/index'
import QRCode from '~/components/Common/QRCode.vue'

const gatheredmoneys = ref({
  percentage: 21,
  money: '1500000',
  investors: '18',
  invested: '0',
})
const appstore = ref(import.meta.env.VITE_APP_APP_STORE)
const playstore = ref(import.meta.env.VITE_APP_PLAY_STORE)

const imgError = ref(true)

const props = defineProps({
  data: {
    type: Array,
    required: true,
  },
  end_time: {
    type: String,
    required: true,
  },
})

const showModal = ref(false)
const showHissa = ref(false)
function closeHissa() {
  showHissa.value = false
}
function openHissa() {
  showHissa.value = true
}
function openModal() {
  showModal.value = true
}
function toggleModal() {
  if (showModal.value == true) {
    showModal.value = false
  } else {
    showModal.value = true
  }
}
function closeModal() {
  showModal.value = false
  document.body.style.overflow = 'auto'
}

const remainingDays = ref(0)
const remainingHours = ref(0)
const remainingMinutes = ref(0)
const remainingSeconds = ref(0)

const timeNow = new Date().getTime()
let timeDifference = props.end_time - timeNow

function startTimer() {
  const millisecondsInOneSecond = 1000
  timeDifference = Math.abs(timeDifference) - millisecondsInOneSecond

  const millisecondsInOneMinute = millisecondsInOneSecond * 60
  const millisecondsInOneHour = millisecondsInOneMinute * 60
  const millisecondsInOneDay = millisecondsInOneHour * 24
  const differenceInDays = timeDifference / millisecondsInOneDay
  const remainderDifferenceInHours =
    (timeDifference % millisecondsInOneDay) / millisecondsInOneHour
  const remainderDifferenceInMinutes =
    (timeDifference % millisecondsInOneHour) / millisecondsInOneMinute
  const remainderDifferenceInSeconds =
    (timeDifference % millisecondsInOneMinute) / millisecondsInOneSecond
  remainingDays.value = Math.abs(Math.floor(differenceInDays))
  remainingHours.value = Math.abs(Math.floor(remainderDifferenceInHours))
  remainingMinutes.value = Math.abs(Math.floor(remainderDifferenceInMinutes))
  remainingSeconds.value = Math.abs(Math.floor(remainderDifferenceInSeconds))
}
onMounted(() => {
  setInterval(() => {
    startTimer()
  }, 1000)
})
</script>

<style>
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.3s ease;
}

.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}
</style>
